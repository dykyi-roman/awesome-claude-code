# PSR-4 Autoloading Compliance Report

## Project Information

| Field | Value |
|-------|-------|
| **Project** | {PROJECT_NAME} |
| **Date** | {DATE} |
| **Auditor** | Claude Code |
| **Standard** | PSR-4 |

## Executive Summary

| Metric | Value |
|--------|-------|
| **Total Files Analyzed** | {TOTAL_FILES} |
| **Files with Violations** | {FILES_WITH_VIOLATIONS} |
| **Total Violations** | {TOTAL_VIOLATIONS} |
| **Critical** | {CRITICAL_COUNT} |
| **Warning** | {WARNING_COUNT} |
| **Info** | {INFO_COUNT} |
| **Compliance Score** | {COMPLIANCE_SCORE}% |

## Composer Configuration

### Current Configuration

```json
{
    "autoload": {
        "psr-4": {
            {CURRENT_CONFIG}
        }
    }
}
```

### Recommended Configuration

```json
{
    "autoload": {
        "psr-4": {
            {RECOMMENDED_CONFIG}
        }
    }
}
```

## Violations by Category

| Violation Type | Count | Severity |
|----------------|-------|----------|
| Namespace-path mismatch | {COUNT} | CRITICAL |
| Class name vs filename mismatch | {COUNT} | CRITICAL |
| Case sensitivity issues | {COUNT} | CRITICAL |
| Missing namespace | {COUNT} | CRITICAL |
| Multiple classes per file | {COUNT} | WARNING |
| Missing trailing backslash in composer.json | {COUNT} | CRITICAL |

## Detailed Violations

### Critical Violations

#### Namespace-Path Mismatch

| File | Found Namespace | Expected Namespace |
|------|-----------------|-------------------|
| `{FILE_PATH}` | `{FOUND_NS}` | `{EXPECTED_NS}` |

**Fix:**
```php
// Change namespace in {FILE_PATH}
namespace {EXPECTED_NS};
```

---

#### Class Name vs Filename Mismatch

| File | Class Name | Expected |
|------|------------|----------|
| `{FILE_PATH}` | `{CLASS_NAME}` | `{EXPECTED_NAME}` |

**Fix:** Rename class to match filename or rename file to match class.

---

### Warning Violations

#### Multiple Classes Per File

| File | Classes Found |
|------|---------------|
| `{FILE_PATH}` | `{CLASS_LIST}` |

**Fix:** Split into separate files.

---

## Directory Structure

### Current Structure

```
{CURRENT_STRUCTURE}
```

### Recommended Structure

```
{RECOMMENDED_STRUCTURE}
```

## Recommendations

### Immediate Actions (Critical)

1. **Fix namespace-path mismatches**
   - Update namespace declarations to match directory structure
   - Or move files to correct directories

2. **Fix class-filename mismatches**
   - Rename classes to match filenames
   - Or rename files to match class names

### Short-term Actions (Warning)

1. **Split files with multiple classes**
   - Create separate file for each class
   - Update any references

2. **Update composer.json**
   - Add missing trailing backslashes
   - Move test autoloading to `autoload-dev`

## Verification Commands

```bash
# Regenerate autoload files
composer dump-autoload

# Validate with strict mode
composer dump-autoload --strict

# Test specific class loading
php -r "require 'vendor/autoload.php'; var_dump(class_exists('{TEST_CLASS}'));"
```

## Appendix

### Files Analyzed

{FILE_LIST}

### Detection Commands Used

```bash
# Find namespace mismatches
for f in $(find src -name "*.php"); do
    ns=$(grep -m1 "^namespace" "$f" | sed 's/namespace //;s/;//')
    echo "$f: $ns"
done

# Find missing namespaces
grep -rL "^namespace" --include="*.php" src/

# Find multiple classes per file
for f in $(find src -name "*.php"); do
    count=$(grep -c "^class\|^interface\|^trait\|^enum" "$f")
    [ "$count" -gt 1 ] && echo "$f: $count classes"
done
```

---

*Generated by Claude Code PSR-4 Autoloading Auditor*
